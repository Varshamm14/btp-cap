PROCEDURE "LOGIN_VALIDATION"(
    IN userName NVARCHAR(256),
    IN user_password NVARCHAR(256),
    OUT EX_MESSAGE NVARCHAR(200)
)
AS
BEGIN
    -- Declare local variables
    DECLARE v_status TINYINT;  -- To hold the user's status
    DECLARE v_message NVARCHAR(200) DEFAULT 'Invalid credentials or inactive user.';  -- Default error message

    -- Check if the user exists with the provided username, password, and status (active)
    SELECT COUNT(*) INTO recordCount
    FROM "users"
    WHERE "username" = :userName
    AND "password" = :user_password
    AND "status" = 1;  -- Only active users (status = 1)

    -- If status is found and valid, set the success message
    IF v_status IS NOT NULL THEN
        EX_MESSAGE := 'Authentication successful';
    ELSE
        -- If not found or status is not active, return failure message
        EX_MESSAGE := 'Invalid credentials or inactive user.';
    END IF;

END;
